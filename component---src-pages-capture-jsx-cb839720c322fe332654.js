(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{198:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),i=a(216),o=a(214),s=a(208),c=a(202),l=(a(131),a(12)),d=a.n(l),u=a(282),m=a(10),p=a.n(m),g=a(1),f=a.n(g),b=a(5),h=a.n(b),y=a(60),v=a(200),x=a(297),E=a(207),w=n.a.forwardRef(function(e,t){var a=e.children,r=e.classes,i=e.className,o=e.color,s=void 0===o?"default":o,c=e.component,l=void 0===c?"button":c,d=e.disabled,u=void 0!==d&&d,m=e.disableFocusRipple,g=void 0!==m&&m,b=e.focusVisibleClassName,h=e.size,v=void 0===h?"large":h,w=e.variant,k=void 0===w?"round":w,I=p()(e,["children","classes","className","color","component","disabled","disableFocusRipple","focusVisibleClassName","size","variant"]);return n.a.createElement(x.a,f()({className:Object(y.a)(r.root,i,"round"!==k&&r.extended,"primary"===s&&r.primary,"secondary"===s&&r.secondary,"large"!==v&&r["size".concat(Object(E.a)(v))],u&&r.disabled,"inherit"===s&&r.colorInherit),component:l,disabled:u,focusRipple:!g,focusVisibleClassName:Object(y.a)(r.focusVisible,b),ref:t},I),n.a.createElement("span",{className:r.label},a))}),k=Object(v.a)(function(e){return{root:f()({},e.typography.button,{boxSizing:"border-box",minHeight:36,transition:e.transitions.create(["background-color","box-shadow","border"],{duration:e.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,boxShadow:e.shadows[6],"&:active":{boxShadow:e.shadows[12]},color:e.palette.getContrastText(e.palette.grey[300]),backgroundColor:e.palette.grey[300],"&$focusVisible":{boxShadow:e.shadows[6]},"&:hover":{backgroundColor:e.palette.grey.A100,"@media (hover: none)":{backgroundColor:e.palette.grey[300]},"&$disabled":{backgroundColor:e.palette.action.disabledBackground},textDecoration:"none"},"&$disabled":{color:e.palette.action.disabled,boxShadow:e.shadows[0],backgroundColor:e.palette.action.disabledBackground}}),label:{width:"100%",display:"inherit",alignItems:"inherit",justifyContent:"inherit"},primary:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.dark,"@media (hover: none)":{backgroundColor:e.palette.primary.main}}},secondary:{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main,"&:hover":{backgroundColor:e.palette.secondary.dark,"@media (hover: none)":{backgroundColor:e.palette.secondary.main}}},extended:{borderRadius:24,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48,"&$sizeSmall":{width:"auto",padding:"0 8px",borderRadius:17,minWidth:34,height:34},"&$sizeMedium":{width:"auto",padding:"0 16px",borderRadius:20,minWidth:40,height:40}},focusVisible:{},disabled:{},colorInherit:{color:"inherit"},sizeSmall:{width:40,height:40},sizeMedium:{width:48,height:48}}},{name:"MuiFab"})(w),I=(a(203),a(222)),C=n.a.forwardRef(function(e,t){var a=e.classes,r=e.className,i=e.color,o=void 0===i?"primary":i,s=e.theme,c=e.value,l=e.valueBuffer,d=e.variant,u=void 0===d?"indeterminate":d,m=p()(e,["classes","className","color","theme","value","valueBuffer","variant"]),g=Object(y.a)(a.root,r,"primary"===o?a.colorPrimary:a.colorSecondary,"determinate"===u&&a.determinate,"indeterminate"===u&&a.indeterminate,"buffer"===u&&a.buffer,"query"===u&&a.query),b=Object(y.a)(a.dashed,"primary"===o?a.dashedColorPrimary:a.dashedColorSecondary),h=Object(y.a)(a.bar,("indeterminate"===u||"query"===u)&&a.bar1Indeterminate,"primary"===o?a.barColorPrimary:a.barColorSecondary,"determinate"===u&&a.bar1Determinate,"buffer"===u&&a.bar1Buffer),v=Object(y.a)(a.bar,("indeterminate"===u||"query"===u)&&a.bar2Indeterminate,"buffer"===u?[a.bar2Buffer,"primary"===o?a.colorPrimary:a.colorSecondary]:"primary"===o?a.barColorPrimary:a.barColorSecondary),x={},E={bar1:{},bar2:{}};if(("determinate"===u||"buffer"===u)&&void 0!==c){x["aria-valuenow"]=Math.round(c);var w=c-100;"rtl"===s.direction&&(w=-w),E.bar1.transform="translateX(".concat(w,"%)")}if("buffer"===u&&void 0!==l){var k=(l||0)-100;"rtl"===s.direction&&(k=-k),E.bar2.transform="translateX(".concat(k,"%)")}return n.a.createElement("div",f()({className:g,role:"progressbar"},x,{ref:t},m),"buffer"===u?n.a.createElement("div",{className:b}):null,n.a.createElement("div",{className:h,style:E.bar1}),"determinate"===u?null:n.a.createElement("div",{className:v,style:E.bar2}))}),S=Object(v.a)(function(e){return{root:{position:"relative",overflow:"hidden",height:4},colorPrimary:{backgroundColor:Object(I.d)(e.palette.primary.light,.6)},colorSecondary:{backgroundColor:Object(I.d)(e.palette.secondary.light,.4)},determinate:{},indeterminate:{},buffer:{backgroundColor:"transparent"},query:{transform:"rotate(180deg)"},dashed:{position:"absolute",marginTop:0,height:"100%",width:"100%",animation:"buffer 3s infinite linear",animationName:"$buffer"},dashedColorPrimary:{backgroundImage:"radial-gradient(".concat(Object(I.d)(e.palette.primary.light,.6)," 0%, ").concat(Object(I.d)(e.palette.primary.light,.6)," 16%, transparent 42%)"),backgroundSize:"10px 10px",backgroundPosition:"0px -23px"},dashedColorSecondary:{backgroundImage:"radial-gradient(".concat(Object(I.d)(e.palette.secondary.light,.4)," 0%, ").concat(Object(I.d)(e.palette.secondary.light,.6)," 16%, transparent 42%)"),backgroundSize:"10px 10px",backgroundPosition:"0px -23px"},bar:{width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},barColorPrimary:{backgroundColor:e.palette.primary.main},barColorSecondary:{backgroundColor:e.palette.secondary.main},bar1Indeterminate:{width:"auto",animation:"mui-indeterminate1 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite",animationName:"$mui-indeterminate1"},bar1Determinate:{transition:"transform .".concat(4,"s linear")},bar1Buffer:{zIndex:1,transition:"transform .".concat(4,"s linear")},bar2Indeterminate:{width:"auto",animation:"mui-indeterminate2 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) infinite",animationName:"$mui-indeterminate2",animationDelay:"1.15s"},bar2Buffer:{transition:"transform .".concat(4,"s linear")},"@keyframes mui-indeterminate1":{"0%":{left:"-35%",right:"100%"},"60%":{left:"100%",right:"-90%"},"100%":{left:"100%",right:"-90%"}},"@keyframes mui-indeterminate2":{"0%":{left:"-200%",right:"100%"},"60%":{left:"107%",right:"-8%"},"100%":{left:"107%",right:"-8%"}},"@keyframes buffer":{"0%":{opacity:1,backgroundPosition:"0px -23px"},"50%":{opacity:0,backgroundPosition:"0px -23px"},"100%":{opacity:1,backgroundPosition:"-200px -23px"}}}},{name:"MuiLinearProgress",withTheme:!0})(C),R=a(283),j=a.n(R),N=function(e){function t(){return e.apply(this,arguments)||this}return d()(t,e),t.prototype.render=function(){console.log("render");var e=this.props,t=e.classes,a=e.extract,r=e.extractedImage,i=e.extractStatus;return console.log(r),r?n.a.createElement(u.a,{className:t.container},n.a.createElement(u.a,{className:t.extractContainer},n.a.createElement("img",{className:t.extractImage,src:"data:image/png;base64, "+r,alt:""}),""!==i&&n.a.createElement(u.a,{className:t.progressContainer},n.a.createElement(S,{className:t.extractProgress}),n.a.createElement("div",{className:t.extractStatus},i)))):n.a.createElement(u.a,{className:t.container},n.a.createElement("input",{className:t.captureInput,accept:"image/*",id:"capture",type:"file",multiple:"multiple",onChange:function(e){var t=new FileReader;t.onloadend=function(){a(t.result.split(",").pop())},t.readAsDataURL(e.target.files[0])}}),n.a.createElement("label",{htmlFor:"capture"},n.a.createElement(k,{variant:"contained",color:"default",component:"span",size:"large","aria-label":"Add"},n.a.createElement(j.a,null))))},t}(n.a.PureComponent);N.propTypes={classes:h.a.shape({container:h.a.shape({}).isRequired,captureInput:h.a.shape({}).isRequired,extractContainer:h.a.shape({}).isRequired,extractImage:h.a.shape({}).isRequired,progressContainer:h.a.shape({}).isRequired,extractProgress:h.a.shape({}).isRequired,extractStatus:h.a.shape({}).isRequired}).isRequired,extract:h.a.func.isRequired,extractedImage:h.a.string.isRequired,extractStatus:h.a.string.isRequired},N.defaultProps={};var O=Object(v.a)({container:{marginTop:0,paddingTop:200,height:"100vh",width:"100vw",backgroundColor:"#eee",display:"flex",alignItems:"center",flexDirection:"column",flexGrow:1},extractContainer:{width:"15rem"},extractImage:{width:"100%",marginBottom:-5},progressContainer:{padding:0},extractProgress:{width:"100%"},extractStatus:{textAlign:"center"},captureInput:{display:"none"}})(N),M=Object(s.b)(function(e,t){return{extractedImage:e.image.extractedImage,extractStatus:e.image.extractStatus}},function(e,t){return{extract:function(t){e(c.l(t))}}})(O);t.default=function(){return n.a.createElement(i.a,null,n.a.createElement(o.a,{title:"InviMarc"}),n.a.createElement(M,null))}},202:function(e,t,a){"use strict";a.d(t,"e",function(){return o}),a.d(t,"g",function(){return s}),a.d(t,"f",function(){return c}),a.d(t,"h",function(){return l}),a.d(t,"a",function(){return d}),a.d(t,"c",function(){return u}),a.d(t,"b",function(){return m}),a.d(t,"d",function(){return p}),a.d(t,"i",function(){return g}),a.d(t,"j",function(){return f}),a.d(t,"k",function(){return h}),a.d(t,"l",function(){return y});var r=a(220),n=a.n(r),i=a(212).config,o="IMAGE_ORIGIN",s="IMAGE_SECRET",c="IMAGE_ORIGIN_ADDED",l="IMAGE_SECRET_ADDED",d="IMAGE_EMBED_END",u="IMAGE_EXTRACT_START",m="IMAGE_EXTRACT_END",p="IMAGE_EXTRACT_STATUS_UPDATE",g=function(e){return{type:c,imageEncoded:e}},f=function(e){return{type:l,imageEncoded:e}},b=function(e){return{type:p,status:e}},h=function(){return function(e,t){var a=t().image,r=a.imageOrigin,o=a.imageSecret;n()({url:i.apiUrl,method:"post",data:{query:'\n        {\n          embed(\n            originImage: "'+r+'",\n            secretImage: "'+o+'"\n          )\n        }\n      '}}).then(function(t){var a=JSON.parse(t.data.data.embed).msg.embeddedImage;console.log(a),e(function(e){return{type:d,embeddedImage:e}}(a))})}},y=function(e){return function(t,a){t(function(e){return{type:u,markedImage:e}}(e)),n()({url:i.apiUrl,method:"post",data:{query:'\n        {\n          extract(\n            markedImage: "'+e+'",\n          )\n        }\n      '},onUploadProgress:function(e){e.loaded===e.total?t(b("正在解析")):t(b("正在上传\n          "+Math.round(e.loaded/e.total*100)+"%\n        "))},onDownloadProgress:function(e){e.loaded===e.total?t(b("")):t(b("正在下载\n          "+Math.round(e.loaded/e.total*100)+"%\n        "))}}).then(function(e){var a=JSON.parse(e.data.data.extract).msg.extractedImage;t(function(e){return{type:m,extractedImage:e}}(a))})}}},204:function(e,t,a){var r;e.exports=(r=a(213))&&r.default||r},210:function(e){e.exports={data:{site:{siteMetadata:{title:"Gatsby Default Starter"}}}}},212:function(e){e.exports={name:"Invimarc",private:!0,description:"A demo for Invimarc",version:"0.1.0",author:"Chun Fan <email@chun.no>",config:{apiUrl:"http://47.110.231.152:3000/graphql"},dependencies:{"@material-ui/core":"^4.1.3","@material-ui/icons":"^4.2.1",axios:"^0.19.0",gatsby:"^2.10.4","gatsby-image":"^2.2.3","gatsby-plugin-manifest":"^2.2.0","gatsby-plugin-material-ui":"^2.1.1","gatsby-plugin-offline":"^2.2.0","gatsby-plugin-react-helmet":"^3.1.0","gatsby-plugin-sharp":"^2.2.1","gatsby-source-filesystem":"^2.1.0","gatsby-transformer-sharp":"^2.2.0","prop-types":"^15.7.2",react:"^16.8.6","react-dom":"^16.8.6","react-helmet":"^5.2.1","react-redux":"^7.1.0","redux-thunk":"^2.3.0"},devDependencies:{"eslint-config-airbnb":"^17.1.0","eslint-plugin-react-hooks":"^1.6.1",prettier:"^1.18.2"},keywords:["gatsby"],license:"MIT",scripts:{build:"gatsby build",develop:"gatsby develop",format:"prettier --write src/**/*.{js,jsx}",start:"npm run develop",serve:"gatsby serve",test:'echo "Write tests! -> https://gatsby.dev/unit-testing"'},repository:{type:"git",url:"https://github.com/gatsbyjs/gatsby-starter-default"},bugs:{url:"https://github.com/gatsbyjs/gatsby/issues"}}},213:function(e,t,a){"use strict";a.r(t);a(63);var r=a(0),n=a.n(r),i=a(5),o=a.n(i),s=a(94),c=function(e){var t=e.location,a=e.pageResources;return a?n.a.createElement(s.a,Object.assign({location:t,pageResources:a},a.json)):null};c.propTypes={location:o.a.shape({pathname:o.a.string.isRequired}).isRequired},t.default=c},214:function(e,t,a){"use strict";var r=a(215),n=a(0),i=a.n(n),o=a(5),s=a.n(o),c=a(224),l=a.n(c);function d(e){var t=e.description,a=e.lang,n=e.meta,o=e.title,s=r.data.site,c=t||s.siteMetadata.description;return i.a.createElement(l.a,{htmlAttributes:{lang:a},title:o,titleTemplate:"%s | "+s.siteMetadata.title,meta:[{name:"description",content:c},{property:"og:title",content:o},{property:"og:description",content:c},{property:"og:type",content:"website"},{name:"twitter:card",content:"summary"},{name:"twitter:creator",content:s.siteMetadata.author},{name:"twitter:title",content:o},{name:"twitter:description",content:c}].concat(n)})}d.defaultProps={lang:"en",meta:[],description:""},d.propTypes={description:s.a.string,lang:s.a.string,meta:s.a.arrayOf(s.a.object),title:s.a.string.isRequired},t.a=d},215:function(e){e.exports={data:{site:{siteMetadata:{title:"Gatsby Default Starter",description:"Kick off your next, great Gatsby project with this default starter. This barebones starter ships with the main Gatsby configuration files you might need.",author:"@gatsbyjs"}}}}},216:function(e,t,a){"use strict";var r=a(210),n=(a(217),a(5)),i=a.n(n),o=a(0),s=a.n(o),c=a(208),l=a(206),d=a(218),u=a(219),m=a(202),p=new u.Record({imageOrigin:"",imageSecret:"",embeddedImage:"",extractedImage:"",extractStatus:""});var g=Object(l.c)({image:function(e,t){switch(void 0===e&&(e=new p),t.type){case m.f:return e.set("imageOrigin",t.imageEncoded);case m.h:return e.set("imageSecret",t.imageEncoded);case m.a:return e.set("embeddedImage",t.embeddedImage);case m.c:return e.set("extractedImage",t.markedImage);case m.b:return e.set("extractedImage",t.extractedImage);case m.d:return e.set("extractStatus",t.status)}return e}}),f=a(292),b=a(296),h=a(294),y=a(295),v=a(59);a(204),s.a.createContext({});i.a.object,i.a.string.isRequired,i.a.func,i.a.func;var x=a(200),E=function(e){var t=e.classes,a=t.appBar,r=t.menu,n=t.left,i=t.right,o=t.logo;return s.a.createElement(f.a,{className:a,position:"static"},s.a.createElement(h.a,{className:r},s.a.createElement("div",{className:n},s.a.createElement(y.a,{variant:"h6",color:"inherit",className:o},"INVIMARC")),s.a.createElement("div",{className:i},s.a.createElement(b.a,{color:"inherit",size:"large",onClick:function(){Object(v.navigate)("/")}},"首页"),s.a.createElement(b.a,{color:"inherit",size:"large",onClick:function(){window.open("http://invimarc.com","_blank")}},"关于我们"))))};E.propTypes={classes:i.a.shape({appBar:i.a.shape({}).isRequired,menu:i.a.shape({}).isRequired,left:i.a.shape({}).isRequired,right:i.a.shape({}).isRequired,logo:i.a.shape({}).isRequired}).isRequired},E.defaultProps={};var w=Object(x.a)({root:{margin:"0 auto",padding:"0px 48px 48px",paddingTop:24},appBar:{position:"fixed",top:0,backgroundColor:"#20232a"},menu:{display:"flex",justifyContent:"space-between",height:56},left:{marginRight:"auto"},right:{marginLeft:"auto"}})(E),k=function(e){var t=e.children,a=r.data,n=Object(l.d)(g,Object(l.a)(d.a));return s.a.createElement(c.a,{store:n},s.a.createElement(w,{siteTitle:a.site.siteMetadata.title}),s.a.createElement("div",{style:{margin:"0 auto"}},s.a.createElement("main",null,t),s.a.createElement("footer",null,"© ",(new Date).getFullYear(),", Built with"," ",s.a.createElement("a",{href:"https://www.gatsbyjs.org"},"Gatsby"))))};k.propTypes={children:i.a.node.isRequired};t.a=k},225:function(e,t,a){"use strict";var r=a(13);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=i.default.memo(i.default.forwardRef(function(t,a){return i.default.createElement(o.default,(0,n.default)({ref:a},t),e)}));0;return a.muiName=o.default.muiName,a};var n=r(a(1)),i=r(a(0)),o=r(a(226))},226:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),i=a(10),o=a.n(i),s=a(0),c=a.n(s),l=(a(5),a(60)),d=a(200),u=a(207),m=c.a.forwardRef(function(e,t){var a=e.children,r=e.classes,i=e.className,s=e.color,d=void 0===s?"inherit":s,m=e.component,p=void 0===m?"svg":m,g=e.fontSize,f=void 0===g?"default":g,b=e.htmlColor,h=e.titleAccess,y=e.viewBox,v=void 0===y?"0 0 24 24":y,x=o()(e,["children","classes","className","color","component","fontSize","htmlColor","titleAccess","viewBox"]);return c.a.createElement(p,n()({className:Object(l.a)(r.root,i,"inherit"!==d&&r["color".concat(Object(u.a)(d))],"default"!==f&&r["fontSize".concat(Object(u.a)(f))]),focusable:"false",viewBox:v,color:b,"aria-hidden":h?"false":"true",role:h?"img":"presentation",ref:t},x),a,h?c.a.createElement("title",null,h):null)});m.muiName="SvgIcon";var p=Object(d.a)(function(e){return{root:{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,fontSize:e.typography.pxToRem(24),transition:e.transitions.create("fill",{duration:e.transitions.duration.shorter})},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorAction:{color:e.palette.action.active},colorError:{color:e.palette.error.main},colorDisabled:{color:e.palette.action.disabled},fontSizeInherit:{fontSize:"inherit"},fontSizeSmall:{fontSize:e.typography.pxToRem(20)},fontSizeLarge:{fontSize:e.typography.pxToRem(35)}}},{name:"MuiSvgIcon"})(m);a.d(t,"default",function(){return p})},282:function(e,t,a){"use strict";var r=a(1),n=a.n(r),i=a(10),o=a.n(i),s=a(61),c=a.n(s),l=a(0),d=a.n(l),u=(a(5),a(60)),m=a(200),p=a(207),g=d.a.forwardRef(function(e,t){var a=e.classes,r=e.className,i=e.component,s=void 0===i?"div":i,c=e.fixed,l=void 0!==c&&c,m=e.maxWidth,g=void 0===m?"lg":m,f=o()(e,["classes","className","component","fixed","maxWidth"]);return d.a.createElement(s,n()({className:Object(u.a)(a.root,r,l&&a.fixed,!1!==g&&a["maxWidth".concat(Object(p.a)(String(g)))]),ref:t},f))});t.a=Object(m.a)(function(e){var t;return{root:(t={width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",paddingLeft:e.spacing(2),paddingRight:e.spacing(2)},c()(t,e.breakpoints.up("sm"),{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}),c()(t,e.breakpoints.up("md"),{paddingLeft:e.spacing(4),paddingRight:e.spacing(4)}),t),fixed:Object.keys(e.breakpoints.values).reduce(function(t,a){var r=e.breakpoints.values[a];return 0!==r&&(t[e.breakpoints.up(a)]={maxWidth:r}),t},{}),maxWidthXs:c()({},e.breakpoints.up("xs"),{maxWidth:Math.max(e.breakpoints.values.xs,444)}),maxWidthSm:c()({},e.breakpoints.up("sm"),{maxWidth:e.breakpoints.values.sm}),maxWidthMd:c()({},e.breakpoints.up("md"),{maxWidth:e.breakpoints.values.md}),maxWidthLg:c()({},e.breakpoints.up("lg"),{maxWidth:e.breakpoints.values.lg}),maxWidthXl:c()({},e.breakpoints.up("xl"),{maxWidth:e.breakpoints.values.xl})}},{name:"MuiContainer"})(g)},283:function(e,t,a){"use strict";var r=a(13);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(0)),i=(0,r(a(225)).default)(n.default.createElement(n.default.Fragment,null,n.default.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"}),n.default.createElement("path",{d:"M20 4h-3.17L15 2H9L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H4V6h4.05l1.83-2h4.24l1.83 2H20v12zM12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0 8c-1.65 0-3-1.35-3-3s1.35-3 3-3 3 1.35 3 3-1.35 3-3 3z"})),"CameraAltOutlined");t.default=i}}]);
//# sourceMappingURL=component---src-pages-capture-jsx-cb839720c322fe332654.js.map